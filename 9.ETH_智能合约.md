## what soldity.

面向对象

智能合约是运行在区块链上的一段代码，代码的逻辑定义了合约的内容。

=> 智能合约的账户保存了合约当前的运行状态 

  balance : 当前余额

  nonce : 交易次数

  code : 合约代码

  storage : 存储，数据结构是一棵MPT

  solidity 是只能合约最常用的语言，语法与JavaScript很接近



### 合约的创建和运行

![image](https://github.com/user-attachments/assets/35dc7dc3-d39f-4b8a-bfd9-d70e22d85695)

### GAS fee

![image](https://github.com/user-attachments/assets/35a55826-a5a1-48c1-a141-ae4029a27b91)

### 错误处理

ETH中的交易，要么不执行，要么完全执行

引起错误的几种情况

1.gas fee 不足

### 合约调用

1. 外部账户调用智能合约

发起一次对合约的调用，具体参数在合约的 data 域中说明

![image](https://github.com/user-attachments/assets/bfe6d4ee-a885-4758-84a6-817af841670b)

2.一个合约如何调用另一个合约

直接调用

![image](https://github.com/user-attachments/assets/38ba115b-fa2a-4791-8c99-5d66f94cc319)

使用address 类型的call()函数

![image](https://github.com/user-attachments/assets/2681ff07-93ef-4385-95f9-42a1fe28a0c8)

代理调用 delegatecall()

![image](https://github.com/user-attachments/assets/399ab81c-251b-475f-b692-9566814259db)


### Payable 

ETH 规定合约账户中要接受转账的函数都需要标注 payable ，否则会引发错误处理，抛出异常。

### fallback()函数

![image](https://github.com/user-attachments/assets/b6044950-8a68-4cc4-ae50-d5939a42275c)


### mapping & 数组

mapping 维护一个哈希表但是不能够遍历所以要单独创建一个数组记录这些数据

address[] bidders; // 定义一个数组

bidders.push(bidder); //往数组后面添加一个元素

bidders.length; // 返回数组的长度

contructor
